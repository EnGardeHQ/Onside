# =============================================================================
# OnSide Environment Configuration
# =============================================================================
# Copy this file to .env and update the values for your environment
# NEVER commit the actual .env file to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
APP_ENV=development
APP_HOST=0.0.0.0
APP_PORT=8000
APP_WORKERS=4

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# For Docker development:
DATABASE_URL=postgresql://postgres:onside-dev-password@onside-db:5432/onside
# For local development:
# DATABASE_URL=postgresql://postgres:onside-password@localhost:5432/onside

# PostgreSQL credentials (used by docker-compose.prod.yml)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-secure-password-here
POSTGRES_DB=onside

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# For Docker development:
REDIS_URL=redis://onside-redis:6379/0
# For local development:
# REDIS_URL=redis://localhost:6379/0

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Cache Configuration
CACHE_ENABLED=true
CACHE_NAMESPACE=onside
CACHE_DEFAULT_TTL=300

# Cache TTL values for different data types (in seconds)
CACHE_TTL_SERP_RESULTS=86400
CACHE_TTL_WEBSITE_CRAWL=3600
CACHE_TTL_KEYWORD_DATA=604800
CACHE_TTL_API_RESPONSE=300
CACHE_TTL_ANALYTICS=1800
CACHE_TTL_SCRAPED_CONTENT=3600

# -----------------------------------------------------------------------------
# Celery Configuration
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://onside-redis:6379/0
CELERY_RESULT_BACKEND=redis://onside-redis:6379/0
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=1800
CELERY_TASK_SOFT_TIME_LIMIT=1500

# Flower Monitoring
FLOWER_PORT=5555
FLOWER_BASIC_AUTH=admin:admin-password-change-in-production

# -----------------------------------------------------------------------------
# MinIO Object Storage Configuration
# -----------------------------------------------------------------------------
# For Docker development:
MINIO_ENDPOINT=onside-minio:9000
# For local development:
# MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=your-minio-access-key
MINIO_SECRET_KEY=your-minio-secret-key

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# -----------------------------------------------------------------------------
# Supabase Configuration (if using Supabase)
# -----------------------------------------------------------------------------
SUPABASE_URL=http://localhost:8000
SUPABASE_KEY=your-supabase-key-here
SUPABASE_JWT_SECRET=your-jwt-secret-here

# -----------------------------------------------------------------------------
# External API Configuration
# -----------------------------------------------------------------------------
# SerpAPI (https://serpapi.com/) - SERP analysis for En Garde integration
# Used for keyword research, competitor analysis, and SERP feature detection
# Get your API key at: https://serpapi.com/manage-api-key
SERPAPI_KEY=your-serpapi-key-here

# GNews API (https://gnews.io/)
GNEWS_API_KEY=your-gnews-api-key-here
GNEWS_DAILY_QUOTA=1000

# IPInfo API (https://ipinfo.io/)
# Get your API key at: https://ipinfo.io/account/token
IPINFO_API_KEY=your-ipinfo-api-key-here

# WhoAPI (https://whoapi.com/)
# Get your API key at: https://whoapi.com/my-account/
WHOAPI_API_KEY=your-whoapi-api-key-here
WHOAPI_BASE_URL=https://api.whoapi.com
WHOAPI_TIMEOUT=30
WHOAPI_MAX_RETRIES=3

# Meltwater
MELTWATER_API_KEY=your-meltwater-api-key-here
MELTWATER_BASE_URL=https://api.meltwater.com/v3

# -----------------------------------------------------------------------------
# EnGarde Production Backend Integration
# -----------------------------------------------------------------------------
# EnGarde API Configuration
# This is the URL of your production EnGarde backend service
# Example: https://api.engarde.example.com or http://localhost:8080
ENGARDE_API_URL=https://api.engarde.com

# EnGarde API Key for authentication
# Get this from your EnGarde backend admin panel or contact your admin
ENGARDE_API_KEY=your-engarde-api-key-here

# EnGarde Tenant UUID
# This identifies your organization in the multi-tenant EnGarde system
# Get this from your EnGarde backend admin panel or contact your admin
ENGARDE_TENANT_UUID=your-tenant-uuid-here

# EnGarde API Timeout (seconds)
ENGARDE_API_TIMEOUT=30

# EnGarde API Retry Configuration
ENGARDE_API_MAX_RETRIES=3
ENGARDE_API_RETRY_DELAY=1

# -----------------------------------------------------------------------------
# AI Service Configuration
# -----------------------------------------------------------------------------
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4
ANTHROPIC_API_KEY=your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-opus-20240229

# AI Service Fallback Configuration
ENABLE_AI_FALLBACK=true
MAX_RETRY_ATTEMPTS=3

# -----------------------------------------------------------------------------
# Analysis Configuration (Sprint 4 AI/ML settings)
# -----------------------------------------------------------------------------
COMPETITOR_ANALYSIS_CONFIDENCE_THRESHOLD=0.85
MARKET_ANALYSIS_CONFIDENCE_THRESHOLD=0.85
AUDIENCE_ANALYSIS_CONFIDENCE_THRESHOLD=0.85

# Chain of Thought Configuration
ENABLE_CHAIN_OF_THOUGHT=true
COT_DETAIL_LEVEL=comprehensive

# -----------------------------------------------------------------------------
# Export Configuration
# -----------------------------------------------------------------------------
PDF_EXPORT_DIR=exports
PDF_TEMPLATE_DIR=templates

# -----------------------------------------------------------------------------
# Performance & Monitoring Configuration
# -----------------------------------------------------------------------------
# Performance Monitoring
ENABLE_PERFORMANCE_MONITORING=true
SLOW_REQUEST_THRESHOLD=1.0
ENABLE_MEMORY_TRACKING=true
LOG_SLOW_REQUESTS=true

# Rate Limiting
ENABLE_RATE_LIMITING=true
DEFAULT_RATE_LIMIT_REQUESTS=100
DEFAULT_RATE_LIMIT_WINDOW=60
BRAND_ANALYSIS_RATE_LIMIT=5
BRAND_ANALYSIS_RATE_WINDOW=3600

# Database Query Profiling
ENABLE_QUERY_PROFILING=true
SLOW_QUERY_THRESHOLD=0.1
