# Onside Platform - Environment Variables Reference

Complete reference for all environment variables used in the Onside platform, organized by category with descriptions, defaults, and Railway-specific notes.

---

## Table of Contents

1. [Auto-Provisioned Variables (Railway)](#auto-provisioned-variables-railway)
2. [Application Core](#application-core)
3. [Security](#security)
4. [Database](#database)
5. [Redis & Cache](#redis--cache)
6. [Celery Task Queue](#celery-task-queue)
7. [External APIs - Required](#external-apis---required)
8. [External APIs - Optional](#external-apis---optional)
9. [Google Services](#google-services)
10. [AI/ML Configuration](#aiml-configuration)
11. [Web Scraping](#web-scraping)
12. [SEO Configuration](#seo-configuration)
13. [Performance & Monitoring](#performance--monitoring)
14. [EnGarde Integration](#engarde-integration)
15. [MinIO Object Storage](#minio-object-storage)
16. [Export Configuration](#export-configuration)

---

## Auto-Provisioned Variables (Railway)

These are automatically created by Railway when you add database addons. **Do not set manually.**

### DATABASE_URL

- **Description**: PostgreSQL database connection string
- **Format**: `postgresql://user:password@host:port/database`
- **Source**: Auto-generated by Railway PostgreSQL addon
- **Required**: Yes
- **Railway**: Auto-set when PostgreSQL addon added
- **Example**: `postgresql://postgres:password@postgres.railway.internal:5432/railway`

### REDIS_URL

- **Description**: Redis connection string for cache and message broker
- **Format**: `redis://[user:password@]host:port[/database]`
- **Source**: Auto-generated by Railway Redis addon
- **Required**: Yes (for caching and Celery)
- **Railway**: Auto-set when Redis addon added
- **Example**: `redis://default:password@redis.railway.internal:6379`

---

## Application Core

### APP_ENV

- **Description**: Application environment
- **Values**: `development`, `staging`, `production`
- **Default**: `development`
- **Railway**: Set to `production`
- **Example**: `APP_ENV=production`

### APP_HOST

- **Description**: Host to bind application server
- **Default**: `0.0.0.0`
- **Railway**: Keep as `0.0.0.0`
- **Example**: `APP_HOST=0.0.0.0`

### APP_PORT

- **Description**: Port for application server
- **Default**: `8000`
- **Railway**: Use `${PORT}` (Railway injects this)
- **Example**: `APP_PORT=${PORT:-8000}`

### APP_WORKERS

- **Description**: Number of Uvicorn worker processes
- **Default**: `4`
- **Railway**: `4` for Starter plan, `8+` for Pro
- **Example**: `APP_WORKERS=4`

### API_V1_STR

- **Description**: API version prefix
- **Default**: `/api/v1`
- **Required**: No
- **Example**: `API_V1_STR=/api/v1`

### PROJECT_NAME

- **Description**: Project name for API documentation
- **Default**: `OnSide SEO Service`
- **Required**: No
- **Example**: `PROJECT_NAME=OnSide SEO Service`

### ENVIRONMENT

- **Description**: Environment name (similar to APP_ENV)
- **Values**: `development`, `test`, `production`
- **Default**: `development`
- **Example**: `ENVIRONMENT=production`

### LOG_LEVEL

- **Description**: Logging verbosity
- **Values**: `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`
- **Default**: `INFO`
- **Production**: Use `INFO` or `WARNING`
- **Debugging**: Use `DEBUG`
- **Example**: `LOG_LEVEL=INFO`

### DEBUG

- **Description**: Enable debug mode
- **Values**: `true`, `false`
- **Default**: `false`
- **Production**: MUST be `false`
- **Example**: `DEBUG=false`

### SQL_ECHO

- **Description**: Echo SQL queries to logs
- **Values**: `true`, `false`
- **Default**: `false`
- **Development**: Can use `true` for debugging
- **Production**: MUST be `false`
- **Example**: `SQL_ECHO=false`

---

## Security

### SECRET_KEY

- **Description**: Secret key for JWT signing and cryptographic operations
- **Required**: Yes - CRITICAL
- **Format**: Random hex string, 32+ characters
- **Generate**: `openssl rand -hex 32`
- **Railway**: MUST set unique value (never use default)
- **Security**: Never commit to Git, never share
- **Example**: `SECRET_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6`

### ALGORITHM

- **Description**: JWT signing algorithm
- **Default**: `HS256`
- **Values**: `HS256`, `HS384`, `HS512`
- **Required**: Yes
- **Example**: `ALGORITHM=HS256`

### ACCESS_TOKEN_EXPIRE_MINUTES

- **Description**: JWT token expiration time in minutes
- **Default**: `30`
- **Production**: `10080` (7 days)
- **Format**: Integer (minutes)
- **Example**: `ACCESS_TOKEN_EXPIRE_MINUTES=10080`

---

## Database

### POSTGRES_USER

- **Description**: PostgreSQL username (for local Docker setup)
- **Default**: `postgres`
- **Railway**: Not needed (use DATABASE_URL)
- **Example**: `POSTGRES_USER=postgres`

### POSTGRES_PASSWORD

- **Description**: PostgreSQL password (for local Docker setup)
- **Railway**: Not needed (use DATABASE_URL)
- **Example**: `POSTGRES_PASSWORD=secure-password`

### POSTGRES_DB

- **Description**: PostgreSQL database name (for local Docker setup)
- **Railway**: Not needed (use DATABASE_URL)
- **Example**: `POSTGRES_DB=onside`

---

## Redis & Cache

### REDIS_HOST

- **Description**: Redis server host
- **Default**: `localhost`
- **Railway**: `redis.railway.internal` (but use REDIS_URL instead)
- **Example**: `REDIS_HOST=redis.railway.internal`

### REDIS_PORT

- **Description**: Redis server port
- **Default**: `6379`
- **Railway**: Use REDIS_URL instead
- **Example**: `REDIS_PORT=6379`

### REDIS_DB

- **Description**: Redis database number
- **Default**: `0`
- **Range**: 0-15
- **Example**: `REDIS_DB=0`

### REDIS_PASSWORD

- **Description**: Redis authentication password
- **Default**: Empty (no password)
- **Railway**: Included in REDIS_URL
- **Example**: `REDIS_PASSWORD=`

### CACHE_ENABLED

- **Description**: Enable caching functionality
- **Values**: `true`, `false`
- **Default**: `true`
- **Railway**: Set to `true`
- **Example**: `CACHE_ENABLED=true`

### CACHE_NAMESPACE

- **Description**: Cache key prefix for isolation
- **Default**: `onside`
- **Purpose**: Prevents key collisions in shared Redis
- **Example**: `CACHE_NAMESPACE=onside`

### CACHE_DEFAULT_TTL

- **Description**: Default cache time-to-live (seconds)
- **Default**: `300` (5 minutes)
- **Format**: Integer (seconds)
- **Example**: `CACHE_DEFAULT_TTL=300`

### CACHE_TTL_SERP_RESULTS

- **Description**: Cache TTL for SERP results
- **Default**: `86400` (24 hours)
- **Rationale**: SERP data changes slowly
- **Example**: `CACHE_TTL_SERP_RESULTS=86400`

### CACHE_TTL_WEBSITE_CRAWL

- **Description**: Cache TTL for website crawl results
- **Default**: `3600` (1 hour)
- **Example**: `CACHE_TTL_WEBSITE_CRAWL=3600`

### CACHE_TTL_KEYWORD_DATA

- **Description**: Cache TTL for keyword analysis data
- **Default**: `604800` (7 days)
- **Rationale**: Keyword metrics stable over weeks
- **Example**: `CACHE_TTL_KEYWORD_DATA=604800`

### CACHE_TTL_API_RESPONSE

- **Description**: Cache TTL for API responses
- **Default**: `300` (5 minutes)
- **Example**: `CACHE_TTL_API_RESPONSE=300`

### CACHE_TTL_ANALYTICS

- **Description**: Cache TTL for analytics data
- **Default**: `1800` (30 minutes)
- **Example**: `CACHE_TTL_ANALYTICS=1800`

### CACHE_TTL_SCRAPED_CONTENT

- **Description**: Cache TTL for scraped content
- **Default**: `3600` (1 hour)
- **Example**: `CACHE_TTL_SCRAPED_CONTENT=3600`

---

## Celery Task Queue

### CELERY_BROKER_URL

- **Description**: Celery message broker URL
- **Default**: Same as REDIS_URL
- **Railway**: Set to `${REDIS_URL}` to reference Railway's Redis
- **Required**: Yes (for background tasks)
- **Example**: `CELERY_BROKER_URL=${REDIS_URL}`

### CELERY_RESULT_BACKEND

- **Description**: Celery result storage backend
- **Default**: Same as REDIS_URL
- **Railway**: Set to `${REDIS_URL}`
- **Required**: Yes (for task results)
- **Example**: `CELERY_RESULT_BACKEND=${REDIS_URL}`

### CELERY_TASK_TRACK_STARTED

- **Description**: Track when tasks start execution
- **Values**: `true`, `false`
- **Default**: `true`
- **Example**: `CELERY_TASK_TRACK_STARTED=true`

### CELERY_TASK_TIME_LIMIT

- **Description**: Hard time limit for tasks (seconds)
- **Default**: `1800` (30 minutes)
- **Format**: Integer (seconds)
- **Note**: Task killed if exceeds this
- **Example**: `CELERY_TASK_TIME_LIMIT=1800`

### CELERY_TASK_SOFT_TIME_LIMIT

- **Description**: Soft time limit for tasks (seconds)
- **Default**: `1500` (25 minutes)
- **Format**: Integer (seconds)
- **Note**: Task gets SoftTimeLimitExceeded exception
- **Example**: `CELERY_TASK_SOFT_TIME_LIMIT=1500`

### FLOWER_PORT

- **Description**: Port for Flower monitoring UI
- **Default**: `5555`
- **Railway**: Use `${PORT}` for Railway-assigned port
- **Example**: `FLOWER_PORT=${PORT:-5555}`

### FLOWER_BASIC_AUTH

- **Description**: Basic auth credentials for Flower
- **Format**: `username:password`
- **Required**: Yes (if deploying Flower)
- **Security**: Use strong password
- **Example**: `FLOWER_BASIC_AUTH=admin:secure-password-here`

---

## External APIs - Required

### SERPAPI_KEY

- **Description**: SerpAPI key for SERP analysis
- **Required**: Yes (core functionality)
- **Get Key**: https://serpapi.com/manage-api-key
- **Free Tier**: 100 searches/month
- **Paid Plans**: From $50/month
- **Format**: String
- **Example**: `SERPAPI_KEY=abc123def456ghi789`

### OPENAI_API_KEY

- **Description**: OpenAI API key for GPT models
- **Required**: Yes (AI analysis)
- **Get Key**: https://platform.openai.com/api-keys
- **Format**: `sk-proj-...`
- **Security**: Never commit to Git
- **Example**: `OPENAI_API_KEY=sk-proj-abc123...`

### ANTHROPIC_API_KEY

- **Description**: Anthropic API key for Claude models
- **Required**: Yes (AI analysis)
- **Get Key**: https://console.anthropic.com/settings/keys
- **Format**: `sk-ant-...`
- **Security**: Never commit to Git
- **Example**: `ANTHROPIC_API_KEY=sk-ant-abc123...`

---

## External APIs - Optional

### SEMRUSH_API_KEY

- **Description**: SEMrush API key for SEO data
- **Required**: No (alternative to SerpAPI)
- **Get Key**: https://www.semrush.com/api-analytics/
- **Example**: `SEMRUSH_API_KEY=abc123`

### GNEWS_API_KEY

- **Description**: GNews API for news monitoring
- **Required**: No
- **Get Key**: https://gnews.io/
- **Example**: `GNEWS_API_KEY=abc123`

### GNEWS_DAILY_QUOTA

- **Description**: Daily quota for GNews API
- **Default**: `1000`
- **Example**: `GNEWS_DAILY_QUOTA=1000`

### IPINFO_API_KEY

- **Description**: IPInfo API for IP geolocation
- **Required**: No
- **Get Key**: https://ipinfo.io/account/token
- **Example**: `IPINFO_API_KEY=abc123`

### WHOAPI_API_KEY

- **Description**: WhoAPI key for domain intelligence
- **Required**: No
- **Get Key**: https://whoapi.com/my-account/
- **Example**: `WHOAPI_API_KEY=abc123`

### WHOAPI_BASE_URL

- **Description**: WhoAPI base URL
- **Default**: `https://api.whoapi.com`
- **Example**: `WHOAPI_BASE_URL=https://api.whoapi.com`

### WHOAPI_TIMEOUT

- **Description**: WhoAPI request timeout (seconds)
- **Default**: `30`
- **Example**: `WHOAPI_TIMEOUT=30`

### WHOAPI_MAX_RETRIES

- **Description**: WhoAPI max retry attempts
- **Default**: `3`
- **Example**: `WHOAPI_MAX_RETRIES=3`

### MELTWATER_API_KEY

- **Description**: Meltwater API for media intelligence
- **Required**: No (enterprise feature)
- **Get Key**: https://www.meltwater.com/
- **Example**: `MELTWATER_API_KEY=abc123`

### MELTWATER_BASE_URL

- **Description**: Meltwater API base URL
- **Default**: `https://api.meltwater.com/v3`
- **Example**: `MELTWATER_BASE_URL=https://api.meltwater.com/v3`

### MELTWATER_API_URL

- **Description**: Alias for MELTWATER_BASE_URL
- **Default**: `https://api.meltwater.com/v3`
- **Example**: `MELTWATER_API_URL=https://api.meltwater.com/v3`

### MELTWATER_API_RATE_LIMIT

- **Description**: Rate limit for Meltwater API
- **Default**: `100`
- **Example**: `MELTWATER_API_RATE_LIMIT=100`

---

## Google Services

### GOOGLE_OAUTH_CLIENT_ID

- **Description**: Google OAuth 2.0 client ID
- **Required**: Only if using Google Analytics integration
- **Get Credentials**: https://console.cloud.google.com/apis/credentials
- **Format**: `*.apps.googleusercontent.com`
- **Example**: `GOOGLE_OAUTH_CLIENT_ID=123456789.apps.googleusercontent.com`

### GOOGLE_OAUTH_CLIENT_SECRET

- **Description**: Google OAuth 2.0 client secret
- **Required**: Only if using Google Analytics
- **Get Credentials**: https://console.cloud.google.com/apis/credentials
- **Security**: Never commit to Git
- **Example**: `GOOGLE_OAUTH_CLIENT_SECRET=abc123-secret`

### GOOGLE_OAUTH_REDIRECT_URI

- **Description**: OAuth callback URL
- **Required**: Only if using Google Analytics
- **Railway**: Update with your Railway domain
- **Format**: `https://your-domain/api/v1/analytics/auth/callback`
- **Example**: `GOOGLE_OAUTH_REDIRECT_URI=https://onside-production.railway.app/api/v1/analytics/auth/callback`

### GOOGLE_ANALYTICS_VIEW_ID

- **Description**: Google Analytics 4 property ID
- **Required**: Only if using Google Analytics
- **Example**: `GOOGLE_ANALYTICS_VIEW_ID=12345678`

---

## AI/ML Configuration

### OPENAI_MODEL

- **Description**: OpenAI model to use
- **Default**: `gpt-4`
- **Options**: `gpt-4`, `gpt-4-turbo`, `gpt-3.5-turbo`
- **Example**: `OPENAI_MODEL=gpt-4`

### ANTHROPIC_MODEL

- **Description**: Anthropic Claude model to use
- **Default**: `claude-3-sonnet-20240229`
- **Options**: `claude-3-opus`, `claude-3-sonnet`, `claude-3-haiku`
- **Example**: `ANTHROPIC_MODEL=claude-3-sonnet-20240229`

### ENABLE_AI_FALLBACK

- **Description**: Enable fallback between AI providers
- **Values**: `true`, `false`
- **Default**: `true`
- **Purpose**: Switch to backup provider if primary fails
- **Example**: `ENABLE_AI_FALLBACK=true`

### MAX_RETRY_ATTEMPTS

- **Description**: Max retries for AI API calls
- **Default**: `3`
- **Example**: `MAX_RETRY_ATTEMPTS=3`

### COMPETITOR_ANALYSIS_CONFIDENCE_THRESHOLD

- **Description**: Minimum confidence for competitor identification
- **Default**: `0.85`
- **Range**: 0.0 - 1.0
- **Example**: `COMPETITOR_ANALYSIS_CONFIDENCE_THRESHOLD=0.85`

### MARKET_ANALYSIS_CONFIDENCE_THRESHOLD

- **Description**: Minimum confidence for market insights
- **Default**: `0.85`
- **Range**: 0.0 - 1.0
- **Example**: `MARKET_ANALYSIS_CONFIDENCE_THRESHOLD=0.85`

### AUDIENCE_ANALYSIS_CONFIDENCE_THRESHOLD

- **Description**: Minimum confidence for audience segments
- **Default**: `0.85`
- **Range**: 0.0 - 1.0
- **Example**: `AUDIENCE_ANALYSIS_CONFIDENCE_THRESHOLD=0.85`

### ENABLE_CHAIN_OF_THOUGHT

- **Description**: Enable chain-of-thought reasoning in AI
- **Values**: `true`, `false`
- **Default**: `true`
- **Purpose**: Improves AI reasoning quality
- **Example**: `ENABLE_CHAIN_OF_THOUGHT=true`

### COT_DETAIL_LEVEL

- **Description**: Chain-of-thought detail level
- **Values**: `basic`, `detailed`, `comprehensive`
- **Default**: `comprehensive`
- **Example**: `COT_DETAIL_LEVEL=comprehensive`

---

## Web Scraping

### SCRAPER_USER_AGENT

- **Description**: User-Agent header for web scraping
- **Default**: `Mozilla/5.0 (compatible; OnSideBot/1.0; +https://onside.ai)`
- **Purpose**: Identify scraper to websites
- **Example**: `SCRAPER_USER_AGENT=Mozilla/5.0 (compatible; OnSideBot/1.0; +https://onside.ai)`

### SCRAPER_TIMEOUT

- **Description**: Web scraping request timeout (seconds)
- **Default**: `30`
- **Example**: `SCRAPER_TIMEOUT=30`

### SCRAPER_MAX_RETRIES

- **Description**: Max retries for failed scrapes
- **Default**: `3`
- **Example**: `SCRAPER_MAX_RETRIES=3`

### SCRAPER_RETRY_DELAY

- **Description**: Delay between retries (seconds)
- **Default**: `5`
- **Example**: `SCRAPER_RETRY_DELAY=5`

---

## SEO Configuration

### SEO_DEFAULT_MARKET

- **Description**: Default market/country for SEO analysis
- **Default**: `us`
- **Options**: `us`, `uk`, `ca`, `au`, etc. (ISO country codes)
- **Example**: `SEO_DEFAULT_MARKET=us`

### SEO_DEFAULT_LANGUAGE

- **Description**: Default language for SEO analysis
- **Default**: `en`
- **Options**: `en`, `es`, `fr`, `de`, etc. (ISO language codes)
- **Example**: `SEO_DEFAULT_LANGUAGE=en`

### SEO_API_RATE_LIMIT

- **Description**: Rate limit for SEO API calls
- **Default**: `5`
- **Example**: `SEO_API_RATE_LIMIT=5`

---

## Performance & Monitoring

### ENABLE_PERFORMANCE_MONITORING

- **Description**: Enable performance tracking
- **Values**: `true`, `false`
- **Default**: `true`
- **Example**: `ENABLE_PERFORMANCE_MONITORING=true`

### SLOW_REQUEST_THRESHOLD

- **Description**: Threshold for slow request warnings (seconds)
- **Default**: `1.0`
- **Example**: `SLOW_REQUEST_THRESHOLD=1.0`

### ENABLE_MEMORY_TRACKING

- **Description**: Enable memory usage tracking
- **Values**: `true`, `false`
- **Default**: `true`
- **Example**: `ENABLE_MEMORY_TRACKING=true`

### LOG_SLOW_REQUESTS

- **Description**: Log slow requests to console
- **Values**: `true`, `false`
- **Default**: `true`
- **Example**: `LOG_SLOW_REQUESTS=true`

### ENABLE_RATE_LIMITING

- **Description**: Enable API rate limiting
- **Values**: `true`, `false`
- **Default**: `true`
- **Example**: `ENABLE_RATE_LIMITING=true`

### DEFAULT_RATE_LIMIT_REQUESTS

- **Description**: Default requests per window
- **Default**: `100`
- **Example**: `DEFAULT_RATE_LIMIT_REQUESTS=100`

### DEFAULT_RATE_LIMIT_WINDOW

- **Description**: Rate limit window (seconds)
- **Default**: `60`
- **Example**: `DEFAULT_RATE_LIMIT_WINDOW=60`

### BRAND_ANALYSIS_RATE_LIMIT

- **Description**: Rate limit for brand analysis requests
- **Default**: `5`
- **Example**: `BRAND_ANALYSIS_RATE_LIMIT=5`

### BRAND_ANALYSIS_RATE_WINDOW

- **Description**: Brand analysis rate limit window (seconds)
- **Default**: `3600` (1 hour)
- **Example**: `BRAND_ANALYSIS_RATE_WINDOW=3600`

### ENABLE_QUERY_PROFILING

- **Description**: Enable database query profiling
- **Values**: `true`, `false`
- **Default**: `true`
- **Development**: `true`, **Production**: `false` or `true` (adds overhead)
- **Example**: `ENABLE_QUERY_PROFILING=true`

### SLOW_QUERY_THRESHOLD

- **Description**: Threshold for slow query warnings (seconds)
- **Default**: `0.1`
- **Example**: `SLOW_QUERY_THRESHOLD=0.1`

---

## EnGarde Integration

### ENGARDE_API_URL

- **Description**: URL for En Garde backend API
- **Required**: Only if using En Garde integration
- **Railway**: Update with actual En Garde Railway domain
- **Format**: `https://engarde-backend-production.railway.app`
- **Example**: `ENGARDE_API_URL=https://engarde-backend-production.railway.app`

### ENABLE_CAMPAIGN_SPACE_INTEGRATION

- **Description**: Enable campaign space features
- **Values**: `true`, `false`
- **Default**: `true`
- **Example**: `ENABLE_CAMPAIGN_SPACE_INTEGRATION=true`

---

## MinIO Object Storage

### MINIO_ENDPOINT

- **Description**: MinIO server endpoint
- **Format**: `host:port`
- **Railway**: `minio.railway.internal:9000` (if MinIO service deployed)
- **Required**: Only if using MinIO
- **Example**: `MINIO_ENDPOINT=minio.railway.internal:9000`

### MINIO_ACCESS_KEY

- **Description**: MinIO access key
- **Required**: Only if using MinIO
- **Security**: Never commit to Git
- **Example**: `MINIO_ACCESS_KEY=your-access-key`

### MINIO_SECRET_KEY

- **Description**: MinIO secret key
- **Required**: Only if using MinIO
- **Security**: Never commit to Git
- **Example**: `MINIO_SECRET_KEY=your-secret-key`

### MINIO_SECURE

- **Description**: Use HTTPS for MinIO connection
- **Values**: `true`, `false`
- **Default**: `false`
- **Railway**: `false` (internal network)
- **Example**: `MINIO_SECURE=false`

### MINIO_REGION

- **Description**: MinIO region
- **Default**: `us-east-1`
- **Example**: `MINIO_REGION=us-east-1`

---

## Export Configuration

### PDF_EXPORT_DIR

- **Description**: Directory for PDF exports
- **Default**: `exports`
- **Example**: `PDF_EXPORT_DIR=exports`

### PDF_TEMPLATE_DIR

- **Description**: Directory for PDF templates
- **Default**: `templates`
- **Example**: `PDF_TEMPLATE_DIR=templates`

---

## CORS Configuration

### ALLOWED_ORIGINS

- **Description**: Allowed origins for CORS
- **Format**: Comma-separated URLs
- **Required**: Yes
- **Railway**: Update with actual frontend domains
- **Important**: Include protocol (`https://`) and no trailing slash
- **Example**: `ALLOWED_ORIGINS=https://engarde-frontend.railway.app,https://onside-ui.com`

### BACKEND_CORS_ORIGINS

- **Description**: Backend CORS origins (pydantic field)
- **Format**: Comma-separated URLs or JSON array
- **Default**: Same as ALLOWED_ORIGINS
- **Example**: `BACKEND_CORS_ORIGINS=https://frontend1.com,https://frontend2.com`

---

## Temporal Analysis (Optional)

### MAX_CONTENT_AGE_DAYS

- **Description**: Maximum age of content to analyze
- **Default**: `365`
- **Example**: `MAX_CONTENT_AGE_DAYS=365`

### TREND_ANALYSIS_WINDOW

- **Description**: Window for trend analysis (days)
- **Default**: `30`
- **Example**: `TREND_ANALYSIS_WINDOW=30`

### MIN_TREND_DATA_POINTS

- **Description**: Minimum data points for trend analysis
- **Default**: `5`
- **Example**: `MIN_TREND_DATA_POINTS=5`

### ANALYTICS_UPDATE_INTERVAL

- **Description**: Analytics update interval (seconds)
- **Default**: `300` (5 minutes)
- **Example**: `ANALYTICS_UPDATE_INTERVAL=300`

---

## Supabase (Optional)

### SUPABASE_URL

- **Description**: Supabase project URL
- **Required**: Only if using Supabase
- **Example**: `SUPABASE_URL=https://abc123.supabase.co`

### SUPABASE_KEY

- **Description**: Supabase API key
- **Required**: Only if using Supabase
- **Example**: `SUPABASE_KEY=your-supabase-key`

### SUPABASE_JWT_SECRET

- **Description**: Supabase JWT secret
- **Required**: Only if using Supabase
- **Example**: `SUPABASE_JWT_SECRET=your-jwt-secret`

---

## Real-Time Analytics (Optional)

### REALTIME_ANALYTICS_ENDPOINT

- **Description**: Endpoint for real-time analytics
- **Required**: No
- **Example**: `REALTIME_ANALYTICS_ENDPOINT=https://analytics.example.com`

### REALTIME_ANALYTICS_KEY

- **Description**: API key for real-time analytics
- **Required**: No
- **Example**: `REALTIME_ANALYTICS_KEY=your-key`

---

## Variable Count Summary

- **Auto-Provisioned**: 2 (DATABASE_URL, REDIS_URL)
- **Required**: 11
- **Recommended**: 25
- **Optional**: 40+
- **Total**: 78+ variables

---

## Railway-Specific Notes

1. **Variable Interpolation**: Railway supports `${VAR_NAME}` syntax
   - Example: `CELERY_BROKER_URL=${REDIS_URL}`

2. **Auto-Provisioned Variables**: Never set DATABASE_URL or REDIS_URL manually

3. **PORT Variable**: Railway injects `PORT` automatically - use `${PORT}` in start commands

4. **Secret Management**: Railway encrypts all environment variables

5. **Variable Inheritance**: When creating multiple services (API, Worker), copy all variables

6. **Redeploy Requirement**: Changes to variables require full redeploy (not just restart)

---

## Validation Checklist

Before deploying, verify:

- [ ] DATABASE_URL exists (auto-set by PostgreSQL addon)
- [ ] REDIS_URL exists (auto-set by Redis addon)
- [ ] SECRET_KEY is unique random value (not default)
- [ ] SERPAPI_KEY is valid
- [ ] OPENAI_API_KEY is valid
- [ ] ANTHROPIC_API_KEY is valid
- [ ] ALLOWED_ORIGINS includes frontend domain
- [ ] CELERY_BROKER_URL references ${REDIS_URL}
- [ ] CELERY_RESULT_BACKEND references ${REDIS_URL}
- [ ] LOG_LEVEL set to INFO (not DEBUG in production)
- [ ] DEBUG set to false
- [ ] All cache TTL values configured
- [ ] ENGARDE_API_URL updated (if using integration)

---

## Security Best Practices

1. **Never commit secrets to Git**
   - Add `.env` to `.gitignore`
   - Use `.env.example` for templates

2. **Use strong SECRET_KEY**
   - Generate with: `openssl rand -hex 32`
   - Unique per environment

3. **Rotate API keys regularly**
   - Update in Railway dashboard
   - Redeploy services

4. **Restrict ALLOWED_ORIGINS**
   - Only list actual frontend domains
   - Never use `*` in production

5. **Monitor API usage**
   - Track SERPAPI_KEY usage
   - Monitor OpenAI costs

---

**Last Updated:** 2024-12-24
**Platform:** Railway
**Reference**: See `RAILWAY_ENV_SETUP.md` for setup instructions
